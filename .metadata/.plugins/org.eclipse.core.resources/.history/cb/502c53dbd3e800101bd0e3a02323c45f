package com.keeplynk.ai.skill;

import com.keeplynk.ai.agent.AgentContext;
import com.keeplynk.ai.llm.LlmClient;

import org.springframework.stereotype.Component;

@Component
public class TitleSkill implements Skill {

    private final LlmClient llmClient;

    public TitleSkill(LlmClient llmClient) {
        this.llmClient = llmClient;
    }

    @Override
    public void apply(AgentContext context) {
        context.addReasoning("TitleSkill started");
        
        String prompt = """
        Generate a concise, meaningful title for this URL:
        %s
        Persona: %s
        """.formatted(context.getUrl(), context.getPersona());

        String title = llmClient.generate(prompt);
        context.getMemory().put("suggestedTitle", title);
        
        context.addReasoning("TitleSkill generated suggestedTitle");
    }
}

